(function(d){function k(a,c){var b=this;d("a[data-rel^='prettyPhoto']").prettyPhoto({theme:"pp_default",deeplinking:!1,callback:function(){detailClosed()}});this.settings=d.extend({},d.fn.thumbGallery.defaults,c);this.isMobile=jQuery.browser.mobile;this._componentInited=!1;this._body=d("body");this._window=d(window);this._doc=d(document);this._windowResizeTimeout=150;this._windowResizeTimeoutID;this._thumbScrollIntervalID;this._thumbHolderArr=[];this.autoPlay=this.settings.autoPlay;this._thumbOrientation= this.settings.thumbOrientation;this.buttonSpacing=this.settings.buttonSpacing;this._thumbsScrollValue=Math.abs(this.settings.thumbsScrollValue);this._layoutType=this.settings.layoutType;this._moveType=this.settings.moveType;this.thumbTransitionOn=!1;this.thumbContainerWidth;this.thumbContainerHeight;this.thumbContainerLeft;this.thumbContainerTop;this.thumbInnerContainerSize=0;this.containerHeightAddOn=this.settings.containerHeightAddOn;this.containerWidthAddOn=this.settings.containerWidthAddOn;this.horizontalSpacing= this.settings.horizontalSpacing;this.verticalSpacing=this.settings.verticalSpacing;this.gridArr=[];this.rows;this.columns;this.allColumns;this.allRows;this.lastWheelCounter=this.rowCounter=this.columnCounter=0;this.scrollPaneApi;this.scrollOffset=this.settings.scrollOffset;this.tempScrollOffset;this.innerSlideshowDelay=this.settings.innerSlideshowDelay;this.innerSlideshowExist=!1;this.slideShowData=[];this.maxWidth=this.settings.maxWidth;this.maxHeight=this.settings.maxHeight;this.componentWrapper= d(a);this.thumbContainer=this.componentWrapper.find(".thumbContainer");this.thumbBackward=this.componentWrapper.find(".thumbBackward");this.thumbForward=this.componentWrapper.find(".thumbForward");this.thumbBackward.css("cursor","pointer");this.thumbForward.css("cursor","pointer");this.thumbBackward.css("display","none");this.thumbForward.css("display","none");this._thumbForwardSrc=this.thumbForward.children("img");this._thumbBackwardSrc=this.thumbBackward.children("img");this.thumbInnerContainer= this.componentWrapper.find(".thumbInnerContainer");this.componentPlaylist=this.componentWrapper.find(".componentPlaylist");"scroll"!=this._moveType&&((this.thumbForward.bind("mouseover",function(){b._thumbForwardSrc.attr("src","horizontal"==b._thumbOrientation?"/assets/images/gallery_lightbox/thumb_forward_on.png":"/assets/images/gallery_lightbox/thumb_forward_v_on.png");return!1}),this.thumbBackward.bind("mouseover",function(){b._thumbBackwardSrc.attr("src","horizontal"==b._thumbOrientation?"/assets/images/gallery_lightbox/thumb_backward_on.png":"/assets/images/gallery_lightbox/thumb_backward_v_on.png"); return!1}),this.thumbForward.bind("mouseout",function(){b._thumbForwardSrc.attr("src","horizontal"==b._thumbOrientation?"/assets/images/gallery_lightbox/thumb_forward.png":"/assets/images/gallery_lightbox/thumb_forward_v.png");return!1}),this.thumbBackward.bind("mouseout",function(){b._thumbBackwardSrc.attr("src","horizontal"==b._thumbOrientation?"/assets/images/gallery_lightbox/thumb_backward.png":"/assets/images/gallery_lightbox/thumb_backward_v.png");return!1}),"grid"==this._layoutType?(this.thumbBackward.bind("click touchstart MozTouchDown",function(){if(!b.thumbTransitionOn){b.thumbTransitionOn= !0;var a;if("horizontal"==b._thumbOrientation){a=parseInt(b.thumbInnerContainer.css("left"),10);a+=b.thumbContainerWidth+b.verticalSpacing;0<a&&(a=0);var c=Math.ceil(b.thumbContainerWidth/(b.boxWidth+b.verticalSpacing));b.lastWheelCounter+=c;b.thumbInnerContainer.stop().animate({left:a+"px"},{duration:700,easing:"easeOutQuart",complete:function(){b.thumbTransitionOn=!1}})}else a=parseInt(b.thumbInnerContainer.css("top"),10),a+=b.thumbContainerHeight+b.horizontalSpacing,0<a&&(a=0),c=Math.ceil(b.thumbContainerHeight/ (b.boxHeight+b.horizontalSpacing)),b.lastWheelCounter+=c,b.thumbInnerContainer.stop().animate({top:a+"px"},{duration:700,easing:"easeOutQuart",complete:function(){b.thumbTransitionOn=!1}});return!1}}),this.thumbForward.bind("click touchstart MozTouchDown",function(){if(!b.thumbTransitionOn){b.thumbTransitionOn=!0;var a;if("horizontal"==b._thumbOrientation){a=parseInt(b.thumbInnerContainer.css("left"),10);a-=b.thumbContainerWidth+b.verticalSpacing;a<-b.thumbInnerContainerSize+b.thumbContainerWidth&& (a=-b.thumbInnerContainerSize+b.thumbContainerWidth);var c=Math.ceil(b.thumbContainerWidth/(b.boxWidth+b.verticalSpacing));b.lastWheelCounter-=c;b.thumbInnerContainer.stop().animate({left:a+"px"},{duration:700,easing:"easeOutQuart",complete:function(){b.thumbTransitionOn=!1}})}else a=parseInt(b.thumbInnerContainer.css("top"),10),a-=b.thumbContainerHeight+b.horizontalSpacing,a<-b.thumbInnerContainerSize+b.thumbContainerHeight&&(a=-b.thumbInnerContainerSize+b.thumbContainerHeight),c=Math.ceil(b.thumbContainerHeight/ (b.boxHeight+b.horizontalSpacing)),b.lastWheelCounter-=c,b.thumbInnerContainer.stop().animate({top:a+"px"},{duration:700,easing:"easeOutQuart",complete:function(){b.thumbTransitionOn=!1}});return!1}})):(this.thumbBackward.bind("mousedown touchstart MozTouchDown",function(){b._thumbScrollIntervalID&&clearInterval(b._thumbScrollIntervalID);b._thumbScrollIntervalID=setInterval(function(){b._scrollThumbsBack()},100);return!1}),this.thumbBackward.bind("mouseup touchend MozTouchUp",function(){b._thumbScrollIntervalID&& clearInterval(b._thumbScrollIntervalID);return!1}),this.thumbForward.bind("mousedown touchstart MozTouchDown",function(){b._thumbScrollIntervalID&&clearInterval(b._thumbScrollIntervalID);b._thumbScrollIntervalID=setInterval(function(){b._scrollThumbsForward()},100);return!1}),this.thumbForward.bind("mouseup touchend MozTouchUp",function(){b._thumbScrollIntervalID&&clearInterval(b._thumbScrollIntervalID);return!1})),this.thumbContainer.bind("mousewheel",function(a,c){if(b._componentInited){b.thumbTransitionOn= true;var h=c>0?1:-1,d;if(b._layoutType=="grid")if(b._thumbOrientation=="horizontal"){if(b.thumbInnerContainerSize==b.thumbContainerWidth)return;if(b.columnCounter!=b.lastWheelCounter)b.columnCounter=b.lastWheelCounter;b.columnCounter=b.columnCounter+h;if(b.columnCounter>0)b.columnCounter=0;else if(b.columnCounter<-b.allColumns+b.columns)b.columnCounter=-b.allColumns+b.columns;b.lastWheelCounter=b.columnCounter;d=b.columnCounter*(b.boxWidth+b.verticalSpacing);b.thumbInnerContainer.stop().animate({left:d+ "px"},{duration:700,easing:"easeOutQuart",complete:function(){b.thumbTransitionOn=false}})}else{if(b.thumbInnerContainerSize==b.thumbContainerHeight)return;if(b.columnCounter!=b.lastWheelCounter)b.rowCounter=b.lastWheelCounter;b.rowCounter=b.rowCounter+h;if(b.rowCounter>0)b.rowCounter=0;else if(b.rowCounter<-b.allRows+b.rows)b.rowCounter=-b.allRows+b.rows;b.lastWheelCounter=b.rowCounter;d=b.rowCounter*(b.boxHeight+b.horizontalSpacing);b.thumbInnerContainer.stop().animate({top:d+"px"},{duration:700, easing:"easeOutQuart",complete:function(){b.thumbTransitionOn=false}})}else if(b._thumbOrientation=="horizontal"){if(b.thumbInnerContainerSize<b._getComponentSize("w"))return;d=parseInt(b.thumbInnerContainer.css("left"),10);d=d+b._thumbsScrollValue*h;d>0+b._thumbBackwardSize?d=0+b._thumbBackwardSize:d<b._getComponentSize("w")-b.thumbInnerContainerSize-b._thumbForwardSize&&(d=b._getComponentSize("w")-b.thumbInnerContainerSize-b._thumbForwardSize);b.thumbInnerContainer.css("left",d+"px")}else{if(b.thumbInnerContainerSize< b._getComponentSize("h"))return;d=parseInt(b.thumbInnerContainer.css("top"),10);d=d+b._thumbsScrollValue*h;d>0+b._thumbBackwardSize?d=0+b._thumbBackwardSize:d<b._getComponentSize("h")-b.thumbInnerContainerSize-b._thumbForwardSize&&(d=b._getComponentSize("h")-b.thumbInnerContainerSize-b._thumbForwardSize);b.thumbInnerContainer.css("top",d+"px")}return false}}),"horizontal"==this._thumbOrientation)?(this._thumbBackwardSize=parseInt(this.thumbBackward.css("width"),10),this._thumbForwardSize=parseInt(this.thumbForward.css("width"), 10)):(this._thumbBackwardSize=parseInt(this.thumbBackward.css("height"),10),this._thumbForwardSize=parseInt(this.thumbForward.css("height"),10)));this._componentFixedSize||this._window.bind("resize",function(){if(!b._componentInited)return!1;b._windowResizeTimeoutID&&clearTimeout(b._windowResizeTimeoutID);b._windowResizeTimeoutID=setTimeout(function(){b._doneResizing()},b._windowResizeTimeout);return!1});this.boxWidth;this.boxHeight;var l=!1,f=0,e,g;this.thumbInnerContainer.children("div[class=thumbHolder]").each(function(){e= d(this).attr("data-id-i",f);e=d(this).attr("data-id-j",0);b._thumbHolderArr.push(e);l||(b.boxWidth=b._thumbHolderArr[0].width(),b.boxHeight=b._thumbHolderArr[0].height(),l=!0);if(0<e.find("div[class='innerThumbHolder']").length){b.innerSlideshowExist=!0;var a=[],c=0;e.find("div[class='innerThumbHolder']").each(function(){g=d(this);g.attr("data-id-i",f);g.attr("data-id-j",c);a.push(g);g.attr("data-title")!=void 0&&!b._isEmpty(g.attr("data-title"))&&b.createTitle(g);g.bind("mouseover",function(a){if(!b._componentInited)return false; if(!a)a=window.event;a.cancelBubble?a.cancelBubble=true:a.stopPropagation&&a.stopPropagation();a=d(a.currentTarget);overThumb(parseInt(a.attr("data-id-i"),10),parseInt(a.attr("data-id-j"),10));if(a=a.data("caption")){var c=b.boxHeight-parseInt(a.data("finalHeight"),10)+1;a.stop().animate({top:c+"px"},{duration:500,easing:"easeOutQuint"});return false}});g.bind("mouseout",function(a){if(!b._componentInited)return false;if(!a)a=window.event;a.cancelBubble?a.cancelBubble=true:a.stopPropagation&&a.stopPropagation(); a=d(a.currentTarget);outThumb(parseInt(a.attr("data-id-i"),10),parseInt(a.attr("data-id-j"),10));if(a=a.data("caption")){a.stop().animate({top:b.boxHeight+"px"},{duration:500,easing:"easeOutQuint"});return false}});g.find(".pp_content").length>0&&g.bind("click touchstart MozTouchDown",function(){detailActivated();return false});c>0&&g.css({display:"none",opacity:0});c++});e.data({slideArr:a,position:f,counter:0});b.slideShowData[f]=b.createSlideshow(e)}else void 0!=e.attr("data-title")&&!b._isEmpty(e.attr("data-title"))&& b.createTitle(e),e.bind("mouseover",function(a){if(!b._componentInited)return false;if(!a)a=window.event;a.cancelBubble?a.cancelBubble=true:a.stopPropagation&&a.stopPropagation();a=d(a.currentTarget);overThumb(parseInt(a.attr("data-id-i"),10),parseInt(a.attr("data-id-j"),10));if(a=a.data("caption")){var c=b.boxHeight-parseInt(a.data("finalHeight"),10)+1;a.stop().animate({top:c+"px"},{duration:500,easing:"easeOutQuint"});return false}}),e.bind("mouseout",function(a){if(!b._componentInited)return false; if(!a)a=window.event;a.cancelBubble?a.cancelBubble=true:a.stopPropagation&&a.stopPropagation();a=d(a.currentTarget);outThumb(parseInt(a.attr("data-id-i"),10),parseInt(a.attr("data-id-j"),10));if(a=a.data("caption")){a.stop().animate({top:b.boxHeight+"px"},{duration:500,easing:"easeOutQuint"});return false}}),0<e.find(".pp_content").length&&e.bind("click touchstart MozTouchDown",function(){detailActivated();return false});f++});this._playlistLength=this._thumbHolderArr.length;if("line"==this._layoutType){"horizontal"== this._thumbOrientation?(this._thumbHolderArr[this._playlistLength-1].css("marginRight","0px"),"scroll"!=this._moveType&&this.thumbInnerContainer.css("left",this._thumbBackwardSize+"px")):(this._thumbHolderArr[this._playlistLength-1].css("marginBottom","0px"),"scroll"!=this._moveType&&this.thumbInnerContainer.css("top",this._thumbBackwardSize+"px"));f=0;for(f;f<this._playlistLength;f++)this.thumbInnerContainerSize="horizontal"==this._thumbOrientation?this.thumbInnerContainerSize+this._thumbHolderArr[f].outerWidth(!0): this.thumbInnerContainerSize+this._thumbHolderArr[f].outerHeight(!0);"horizontal"==this._thumbOrientation?(this.thumbInnerContainerSize+=this.containerWidthAddOn,this.thumbInnerContainer.css("width",this.thumbInnerContainerSize+"px")):(this.thumbInnerContainerSize+=this.containerHeightAddOn,this.thumbInnerContainer.css("height",this.thumbInnerContainerSize+"px"))}this.thumbInnerContainer.css("display","block");this._doneResizing();this._componentInited=!0;thumbGallerySetupDone();d(".thumb_hidden").stop().animate({opacity:1}, {duration:1E3,easing:"easeOutSine"});this.innerSlideshowExist&&this.settings.innerSlideshowOn&&this.toggleInnerslideShow(!0)}k.prototype={toggleInnerslideShow:function(a){if(this._componentInited&&this.innerSlideshowExist)for(var c=0;c<this.slideShowData.length;c++)void 0!=this.slideShowData[c]&&(a?this.slideShowData[c].start():this.slideShowData[c].stop())},toggleInnerslideShowNum:function(a,c){this._componentInited&&this.innerSlideshowExist&&void 0!=this.slideShowData[a]&&(c?this.slideShowData[a].start(): this.slideShowData[a].stop())},getThumbHolder:function(a){if(this._componentInited&&void 0!=this._thumbHolderArr[a])return this._thumbHolderArr[a]},createTitle:function(a){var c,b,l,f,e;c=a.attr("data-title");c=d("<div/>").html(c).addClass("title");c.appendTo(this.componentWrapper);b=parseInt(c.css("paddingLeft"),10);l=parseInt(c.css("paddingRight"),10);f=parseInt(c.css("paddingTop"),10);e=parseInt(c.css("paddingBottom"),10);c.css("top",this.boxHeight+"px");c.css("width",this.boxWidth-b-l+"px");b= c.height()+1;c.data("finalHeight",f+e+b);c.appendTo(a);a.data("caption",c)},createSlideshow:function(a){function c(a){this.slideDiv=a;this.len=this.slideDiv.data("slideArr").length;this.counter=parseInt(this.slideDiv.data("counter"),10);this.delay;this.timeoutID;this.time=1E3;this.ease="easeOutSine";this.running=!1}var b=this;c.prototype={start:function(){var a=this;this.delay=b._randomMinMax(b.innerSlideshowDelay[0],b.innerSlideshowDelay[1]);this.delay*=1E3;this.timeoutID&&clearTimeout(this.timeoutID); this.timeoutID=setTimeout(function(){a.next()},this.delay);this.running=!0},stop:function(){this.timeoutID&&clearTimeout(this.timeoutID);this.running=!1},next:function(){var a=this;this.timeoutID&&clearTimeout(this.timeoutID);this.slideDiv.data("slideArr")[this.counter].stop().animate({opacity:0},{duration:this.time,easing:this.ease,complete:function(){d(this).css("display","none")}});this.counter++;this.counter>this.len-1&&(this.counter=0);this.slideDiv.data("counter",this.counter);this.slideDiv.data("slideArr")[this.counter].css({opacity:0, display:"block"}).stop().animate({opacity:1},{duration:this.time,easing:this.ease,complete:function(){a.running&&a.start()}})}};return new c(a)},checkScroll:function(){var a=this;this.scrollPaneApi?this.scrollPaneApi.reinitialise():(this.scrollPaneApi=this.thumbContainer.jScrollPane().data().jsp,this.thumbContainer.bind("jsp-initialised",function(a,b){!b&&"vertical"!=this._thumbOrientation&&d(".jspPane").css("left","0px")}).bind("jsp-scroll-y",function(){}).bind("jsp-scroll-x",function(){}),"vertical"== this._thumbOrientation?this.thumbContainer.jScrollPane({verticalDragMinHeight:80,verticalDragMaxHeight:100}):(this.thumbContainer.jScrollPane({horizontalDragMinWidth:80,horizontalDragMaxWidth:100}),this.componentPlaylist.bind("mousewheel",function(c,b){if(a._componentInited&&a.scrollPaneApi)return a.scrollPaneApi&&a.scrollPaneApi.scrollByX(100*(0<b?-1:1)),!1})))},calculateGrid:function(a){this.tempScrollOffset=a?parseInt(a,10):this.scrollOffset;var a=this._getComponentSize("w"),c=this._getComponentSize("h"); "horizontal"==this._thumbOrientation?("scroll"==this._moveType&&(c-=this.tempScrollOffset),this.rows=Math.floor(c/(this.boxHeight+this.horizontalSpacing)),this.rows*(this.boxHeight+this.horizontalSpacing)+this.boxHeight<=c&&(this.rows+=1),this.columns=Math.floor(a/(this.boxWidth+this.verticalSpacing)),this.allColumns=Math.ceil(this._playlistLength/this.rows),a=this.allColumns<this.columns?this.allColumns:this.columns,this.gridArr=this.createGrid(this.allColumns,this.rows,this.boxWidth,this.boxHeight, this.horizontalSpacing,this.verticalSpacing,0,0,!1),this.thumbInnerContainerSize=this.allColumns*this.boxWidth+(this.allColumns-1)*this.verticalSpacing,this.thumbContainerWidth=a*this.boxWidth+(a-1)*this.verticalSpacing,this.thumbContainerHeight=this.rows*this.boxHeight+(this.rows-1)*this.horizontalSpacing):("scroll"==this._moveType&&(a-=this.tempScrollOffset),this.columns=Math.floor(a/(this.boxWidth+this.verticalSpacing)),this.columns*(this.boxWidth+this.verticalSpacing)+this.boxWidth<=a&&(this.columns+= 1),this.rows=Math.floor(c/(this.boxHeight+this.horizontalSpacing)),this.allRows=Math.ceil(this._playlistLength/this.columns),a=this.allRows<this.rows?this.allRows:this.rows,this.gridArr=this.createGrid(this.columns,this.allRows,this.boxWidth,this.boxHeight,this.horizontalSpacing,this.verticalSpacing,0,0,!0),this.thumbInnerContainerSize=this.allRows*this.boxHeight+(this.allRows-1)*this.horizontalSpacing,this.thumbContainerWidth=this.columns*this.boxWidth+(this.columns-1)*this.verticalSpacing,this.thumbContainerHeight= a*this.boxHeight+(a-1)*this.horizontalSpacing)},layoutTypeGrid:function(){var a=0;for(a;a<this._playlistLength;a++)d(this._thumbHolderArr[a]).css({left:this.gridArr[a].x+"px",top:this.gridArr[a].y+"px"});this.thumbContainerLeft=Math.ceil(this._getComponentSize2("w")/2-this.thumbContainerWidth/2);this.thumbContainerTop=Math.ceil(this._getComponentSize2("h")/2-this.thumbContainerHeight/2);this.thumbContainerHeight+=this.containerHeightAddOn;this.thumbContainerWidth+=this.containerWidthAddOn;this.thumbInnerContainerSize= "horizontal"==this._thumbOrientation?this.thumbInnerContainerSize+this.containerWidthAddOn:this.thumbInnerContainerSize+this.containerHeightAddOn;if("scroll"!=this._moveType){if("horizontal"==this._thumbOrientation){this._getComponentSize("w");a=parseInt(this.thumbInnerContainer.css("left"),10);a<-this.thumbInnerContainerSize+this.thumbContainerWidth&&(a=-this.thumbInnerContainerSize+this.thumbContainerWidth,this.thumbInnerContainer.css("left",a+"px"));this.thumbInnerContainerSize>this.thumbContainerWidth? (this.thumbBackward.css("display","block"),this.thumbForward.css("display","block")):(this.thumbBackward.css("display","none"),this.thumbForward.css("display","none"),this.thumbInnerContainer.css("left","0px"));a=this.thumbContainerLeft-this._thumbBackwardSize-this.buttonSpacing;0>a&&(a=0);var c=this.thumbContainerLeft+this.thumbContainerWidth+this.buttonSpacing;c>this._getComponentSize2("w")-this._thumbForwardSize&&(c=this._getComponentSize2("w")-this._thumbForwardSize);this.thumbBackward.css("left", a+"px");this.thumbForward.css("left",c+"px")}else this._getComponentSize("h"),a=parseInt(this.thumbInnerContainer.css("top"),10),a<-this.thumbInnerContainerSize+this.thumbContainerHeight&&(a=-this.thumbInnerContainerSize+this.thumbContainerHeight,this.thumbInnerContainer.css("top",a+"px")),this.thumbInnerContainerSize>this.thumbContainerHeight?(this.thumbBackward.css("display","block"),this.thumbForward.css("display","block")):(this.thumbBackward.css("display","none"),this.thumbForward.css("display", "none"),this.thumbInnerContainer.css("top","0px")),a=this.thumbContainerTop-this._thumbBackwardSize-this.buttonSpacing,0>a&&(a=0),c=this.thumbContainerTop+this.thumbContainerHeight+this.buttonSpacing,c>this._getComponentSize2("h")-this._thumbForwardSize&&(c=this._getComponentSize2("h")-this._thumbForwardSize),this.thumbBackward.css("top",a+"px"),this.thumbForward.css("top",c+"px");this.thumbContainer.css({width:this.thumbContainerWidth+"px",height:this.thumbContainerHeight+"px",left:this.thumbContainerLeft+ "px",top:this.thumbContainerTop+"px"})}else"horizontal"==this._thumbOrientation?(this.thumbContainerTop-=this.tempScrollOffset/2,this.thumbContainerHeight+=this.tempScrollOffset):(this.thumbContainerLeft-=this.tempScrollOffset/2,this.thumbContainerWidth+=this.tempScrollOffset),this.componentPlaylist.css({width:this.thumbContainerWidth+"px",height:this.thumbContainerHeight+"px",left:this.thumbContainerLeft+"px",top:this.thumbContainerTop+"px"}),this.thumbContainer.css({width:this.thumbContainerWidth+ "px",height:this.thumbContainerHeight+"px"}),"horizontal"==this._thumbOrientation?this.thumbInnerContainer.css({width:this.thumbInnerContainerSize+"px",height:this.thumbContainerHeight+"px"}):this.thumbInnerContainer.css({width:this.thumbContainerWidth+"px",height:this.thumbInnerContainerSize+"px"})},layoutTypeLine:function(){var a=this._getComponentSize("w"),c=this._getComponentSize("h");if("horizontal"==this._thumbOrientation)if("scroll"!=this._moveType)this.thumbContainer.css({width:a+"px",marginLeft:-a/ 2+"px"}),this.thumbContainerLeft=this.thumbContainer.offset().left,this.thumbBackward.css("left",this.thumbContainerLeft+"px"),this.thumbForward.css("left",this.thumbContainerLeft+a-this._thumbForwardSize+"px"),this.thumbInnerContainerSize>this._getComponentSize("w")?(this.thumbBackward.css("display","block"),this.thumbForward.css("display","block"),a=parseInt(this.thumbInnerContainer.css("left"),10),a<this._getComponentSize("w")-this.thumbInnerContainerSize-this._thumbForwardSize?(this._thumbScrollIntervalID&& clearInterval(this._thumbScrollIntervalID),a=this._getComponentSize("w")-this.thumbInnerContainerSize-this._thumbForwardSize):a>0+this._thumbBackwardSize&&(a=0+this._thumbBackwardSize),this.thumbInnerContainer.css("left",a+"px")):(this.thumbBackward.css("display","none"),this.thumbForward.css("display","none"),this.thumbInnerContainer.css("left",this._getComponentSize("w")/2-this.thumbInnerContainerSize/2+"px"));else{var b=this.thumbInnerContainerSize>a?this.scrollOffset:0;this.thumbContainerHeight= this.boxHeight;this.thumbContainerWidth=this.thumbInnerContainerSize<a?this.thumbInnerContainerSize:a;this.thumbContainerWidth+=this.containerWidthAddOn;this.thumbContainerLeft=Math.ceil(this._getComponentSize2("w")/2-this.thumbContainerWidth/2);this.thumbContainerTop=Math.ceil(this._getComponentSize2("h")/2-this.thumbContainerHeight/2);this.thumbContainerTop-=b/2;this.thumbContainerHeight+=b;this.componentPlaylist.css({width:this.thumbContainerWidth+"px",height:this.thumbContainerHeight+"px",left:this.thumbContainerLeft+ "px",top:this.thumbContainerTop+"px"});this.thumbContainer.css({width:this.thumbContainerWidth+"px",height:this.thumbContainerHeight+"px"});this.thumbInnerContainer.css({height:this.thumbContainerHeight+"px"})}else"scroll"!=this._moveType?(this.thumbContainer.css({height:c+"px",marginTop:-c/2+"px"}),this.thumbContainerTop=this.thumbContainer.offset().top,this.thumbBackward.css("top",this.thumbContainerTop+"px"),this.thumbForward.css("top",this.thumbContainerTop+c-this._thumbForwardSize+"px"),this.thumbInnerContainerSize> this._getComponentSize("h")?(this.thumbBackward.css("display","block"),this.thumbForward.css("display","block"),a=parseInt(this.thumbInnerContainer.css("top"),10),a<this._getComponentSize("h")-this.thumbInnerContainerSize-this._thumbForwardSize?(this._thumbScrollIntervalID&&clearInterval(this._thumbScrollIntervalID),a=this._getComponentSize("h")-this.thumbInnerContainerSize-this._thumbForwardSize):a>0+this._thumbBackwardSize&&(a=0+this._thumbBackwardSize),this.thumbInnerContainer.css("top",a+"px")): (this.thumbBackward.css("display","none"),this.thumbForward.css("display","none"),this.thumbInnerContainer.css("top",this._getComponentSize("h")/2-this.thumbInnerContainerSize/2+"px"))):(b=this.thumbInnerContainerSize>c?this.scrollOffset:0,this.thumbContainerWidth=this.boxWidth,this.thumbContainerHeight=this.thumbInnerContainerSize<c?this.thumbInnerContainerSize:c,this.thumbContainerHeight+=this.containerHeightAddOn,this.thumbContainerLeft=Math.ceil(this._getComponentSize2("w")/2-this.thumbContainerWidth/ 2),this.thumbContainerTop=Math.ceil(this._getComponentSize2("h")/2-this.thumbContainerHeight/2),this.thumbContainerLeft-=b/2,this.thumbContainerWidth+=b,this.componentPlaylist.css({width:this.thumbContainerWidth+"px",height:this.thumbContainerHeight+"px",left:this.thumbContainerLeft+"px",top:this.thumbContainerTop+"px"}),this.thumbContainer.css({width:this.thumbContainerWidth+"px",height:this.thumbContainerHeight+"px"}),this.thumbInnerContainer.css({width:this.thumbContainerWidth+"px"}))},_scrollThumbsBack:function(){var a; "horizontal"==this._thumbOrientation?(a=parseInt(this.thumbInnerContainer.css("left"),10),a+=this._thumbsScrollValue,a>0+this._thumbBackwardSize&&(this._thumbScrollIntervalID&&clearInterval(this._thumbScrollIntervalID),a=0+this._thumbBackwardSize),this.thumbInnerContainer.css("left",a+"px")):(a=parseInt(this.thumbInnerContainer.css("top"),10),a+=this._thumbsScrollValue,a>0+this._thumbBackwardSize&&(this._thumbScrollIntervalID&&clearInterval(this._thumbScrollIntervalID),a=0+this._thumbBackwardSize), this.thumbInnerContainer.css("top",a+"px"))},_scrollThumbsForward:function(){var a;"horizontal"==this._thumbOrientation?(a=parseInt(this.thumbInnerContainer.css("left"),10),a-=this._thumbsScrollValue,a<this._getComponentSize("w")-this.thumbInnerContainerSize-this._thumbForwardSize&&(this._thumbScrollIntervalID&&clearInterval(this._thumbScrollIntervalID),a=this._getComponentSize("w")-this.thumbInnerContainerSize-this._thumbForwardSize),this.thumbInnerContainer.css("left",a+"px")):(a=parseInt(this.thumbInnerContainer.css("top"), 10),a-=this._thumbsScrollValue,a<this._getComponentSize("h")-this.thumbInnerContainerSize-this._thumbForwardSize&&(this._thumbScrollIntervalID&&clearInterval(this._thumbScrollIntervalID),a=this._getComponentSize("h")-this.thumbInnerContainerSize-this._thumbForwardSize),this.thumbInnerContainer.css("top",a+"px"))},_getComponentSize:function(a){return"w"==a?0<this.maxWidth?this.componentWrapper.width()<this.maxWidth?this.componentWrapper.width():this.maxWidth:this.componentWrapper.width():0<this.maxHeight? this.componentWrapper.height()<this.maxHeight?this.componentWrapper.height():this.maxHeight:this.componentWrapper.height()},_getComponentSize2:function(a){return"w"==a?this.componentWrapper.width():this.componentWrapper.height()},_randomMinMax:function(a,c){return Math.random()*(c-a)+a},_stringCounter:function(a){return 9>a?"0"+(a+1):a+1},_preventSelect:function(a){d(a).each(function(){d(this).attr("unselectable","on").css({"-moz-user-select":"none","-webkit-user-select":"none","user-select":"none"}).each(function(){this.onselectstart= function(){return!1}})})},_resizeHandler:function(){if(!this._componentInited)return!1;this._windowResizeTimeoutID&&clearTimeout(this._windowResizeTimeoutID);this._windowResizeTimeoutID=setTimeout(this._doneResizing,this._windowResizeTimeout)},_doneResizing:function(){"grid"==this._layoutType?(this.calculateGrid(this.scrollOffset),"scroll"==this._moveType&&("horizontal"==this._thumbOrientation?this.thumbInnerContainerSize<=this.thumbContainerWidth&&this.calculateGrid("0"):this.thumbInnerContainerSize<= this.thumbContainerHeight&&this.calculateGrid("0")),this.layoutTypeGrid(this.scrollOffset)):this.layoutTypeLine();"scroll"==this._moveType&&this.checkScroll()},_isEmpty:function(a){return 0==a.replace(/^\s+|\s+$/g,"").length},createGrid:function(a,c,b,d,f,e,g,k,o){for(var h=[],i,m,n,p=a*c,j=0;j<p;j++)i={},o?(m=j%a,n=Math.floor(j/a),i.x=m*(b+f)+g,i.y=n*(d+e)+k):(m=j%c,n=Math.floor(j/c),i.x=n*(b+f)+g,i.y=m*(d+e)+k),h.push(i);return h}};d.fn.thumbGallery=function(a){return this.each(function(){var c= new k(d(this),a);d(this).data("thumbGallery",c);d.fn.thumbGallery.toggleInnerslideShow=function(a){c.toggleInnerslideShow(a)};d.fn.thumbGallery.toggleInnerslideShowNum=function(a,d){c.toggleInnerslideShowNum(a,d)};d.fn.thumbGallery.getThumbHolder=function(a){return c.getThumbHolder(a)}})};d.fn.thumbGallery.defaults={layoutType:"line",thumbOrientation:"vertical",moveType:"scroll",scrollOffset:22,maxWidth:0,maxHeight:0,verticalSpacing:10,horizontalSpacing:10,buttonSpacing:10,thumbsScrollValue:150,innerSlideshowDelay:[2, 4],innerSlideshowOn:!0};d.fn.thumbGallery.settings={}})(jQuery); (function(d){jQuery.browser.mobile=/android.+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(d)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|e\-|e\/|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(di|rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|xda(\-|2|g)|yas\-|your|zeto|zte\-/i.test(d.substr(0,4))})(navigator.userAgent|| navigator.vendor||window.opera);